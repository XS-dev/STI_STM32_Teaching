# 教学平台

基于keil和cubemx开发，课前自行查看视频学习，课上仅答疑

h743购买链接：https://item.taobao.com/item.htm?spm=a21n57.1.0.0.77d3523c7OLfrS&id=649644156154&ns=1&abbucket=14#detail

STJlink V2下载器：https://detail.tmall.com/item.htm?ali_refid=a3_430582_1006:1109983619:N:CtUIjKpkaFmSVKrrsC7XLjSGqGd7qQWK:296eed828c289f9db2c0b22583b249a1&ali_trackid=1_296eed828c289f9db2c0b22583b249a1&id=558866168716&spm=a21n57.1.0.0&skuId=4690094993243

keil：

链接：https://pan.baidu.com/s/1qjiWhm1ygNQlQLvp8_sX4A?pwd=v0jo
提取码：v0jo

cubemx：

链接：https://pan.baidu.com/s/1SV9i19vHFu7j-WtUuVkYWw?pwd=2y00
提取码：2y00

keil的stm32h7系列开发包：
链接：https://pan.baidu.com/s/1jj6XtUxdRBOi7yQzSbLBBA?pwd=t7jq
提取码：t7jq

## 参考学习链接：
https://www.bilibili.com/video/BV1yB4y1R7Av

https://blog.csdn.net/simon223/category_8829230_3.html

https://blog.csdn.net/as480133937/category_9188655_2.html

底板：https://oshwhub.com/sti-c06/STM32H743VIT6di-ban

B站搜： HUST电工基地-基于CubeMX的STM32开发

# 教学内容

## 第一学期

0、软件及环境安装：keil，cubemx的安装

0.5、模板工程搭建（包括三组串口，时钟树及MPU及电源配置，其中两组串口会开中断）

1.Gpio输入输出

2.中断概念及IO中断操作

第一次课任务：使用两个片上按键控制同一个led灯亮灭，尽量采用按键中断，不要求按键无冲。

3.定时器延时功能及中断功能,定时器捕获模式，定时器pwm

4.uart串口收发及中断

第二次课任务：使用定时器产生方波，由验收助教到时候修改，可以使用延时，做好使用pwm，用捕获或者一般定时器求解周期时长（频率），并通过串口发送至电脑。

### 考核任务：

1、通过矩阵键盘或按键或电脑串口（至少使用两项）控制流水呼吸灯，控制频率

2、频率测量仪，可以通过按键选择开始测量并显示屏显示频率值或串口输出打印至电脑，这里要求占空比可调

## 第二学期

第一次课：

1.dac输出直流，正弦波

2.adc采样（单通道，双通道同步，双通道单独）（dma方式）

3.fft讲解

第一次课任务：开启两个adc，验收时指定dac的输出频率（1K-100KHz），随机连接其中一个dac，要求能够自动识别是哪个adc采集到了信号，并显示信号的频率。

第二次课：

3.时钟树的介绍

4.,spi，I2C协议的编写及介绍

第三次课：

5.ads1256的配置使用

6.dds原理及9910和9959的驱动代码使用

7.ad8302在阻容判断测量方面的作用

### 考核任务：

### 信号失真度测量（至多2人组队）

基本要求

（1）输入信号的峰峰值电压范围：2V

（2）输入信号基频：1kHz。

（3）输入信号失真度范围：5% ~ 50%。

（4）要求对输入信号失真度测量误差绝对值 THD -THD x o ≤5%，THDx 和THDo分别为失真度的测量值与标称值。

（5）显示失真度测量值THDx 。

（6）失真度测量与显示用时不超过 10 秒。

发挥部分

（1）输入信号的峰峰值电压范围：2V

（2）输入信号基频范围：1kHz ~100kHz。

（3）测量并显示输入信号失真度THDx 值，要求  THD -THD x o ≤3%。

（4）显示输入信号基波与谐波的归一化幅值，只显示到 5 次谐波。

（4）测量并显示输入信号的一个周期波形及频谱


### 简易电路特性测试仪（至多3人合作）

基本要求

（1）电路特性测试仪输出 1kHz 正弦波信号，自动测量并显示该放大器的
输入电阻。输入电阻测量范围 1kΩ~50kΩ，相对误差的绝对值不超过
10%。

（2）电路特性测试仪输出 1kHz 正弦波信号，自动测量并显示该放大器的
输出电阻。输出电阻测量范围 500Ω~5kΩ，相对误差的绝对值不超过
10%。

（3）自动测量并显示该放大器在输入 1kHz 频率时的增益。相对误差的绝
对值不超过 10%。

（4）自动测量并显示该放大器的频幅特性曲线。显示上限频率值，相对误
差的绝对值不超过50%。

2. 发挥部分
 
（1）该电路特性测试仪能判断放大器电路元器件变化而引起故障或变化
的原因。任意开路或短路 R1~R4 中的一个电阻，电路特性测试仪能
够判断并显示故障原因。

（2）任意开路 C1~C3 中的一个电容，电路特性测试仪能够判断并显示故
障原因。

（3）任意增大 C2~C3 中的一个电容的容量，使其达到原来值的两倍。电
路特性测试仪能够判断并显示该变化的原因。

(4) 其它

 注意：每两次测量之间允许复位系统，若能自动测量可以加入“其它”中
